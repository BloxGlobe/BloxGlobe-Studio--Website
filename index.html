<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>BloxGlobe Studio</title>
<style>
  :root{
    --bg-1:#0b0c10; --bg-2:#1f2833; --accent:#00c8ff; --card:rgba(255,255,255,0.05);
    --muted:#b0b0b0; --glass:rgba(255,255,255,0.03);
  }
  *{box-sizing:border-box}
  body{
    margin:0;font-family:Inter, "Poppins", system-ui, Arial, sans-serif;
    background:linear-gradient(180deg,var(--bg-1),var(--bg-2));color:#fff;overflow-x:hidden;
  }

  /* Loading screen */
  #loading{
    position:fixed;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;
    background:#000;z-index:9999;
  }
  #loading img{width:140px;animation:pumpkin 1.6s ease-in-out infinite}
  #loading h1{color:orange;margin-top:14px;font-size:22px;animation:blink 2s linear infinite}
  @keyframes pumpkin{0%,100%{transform:scale(1) rotate(0)}50%{transform:scale(1.06) rotate(8deg)}}
  @keyframes blink{50%{opacity:.6}}

  header{display:flex;align-items:center;justify-content:space-between;padding:14px 28px;background:var(--glass);backdrop-filter:blur(8px);position:sticky;top:0;z-index:60;border-bottom:1px solid rgba(255,255,255,0.03)}
  .brand{display:flex;gap:12px;align-items:center}
  .brand img{width:46px;height:46px;border-radius:8px;object-fit:cover}
  .brand h1{font-size:1.05rem;margin:0}
  nav{display:flex;gap:12px;align-items:center}
  nav a, nav button{color:var(--muted);text-decoration:none;background:transparent;border:none;cursor:pointer;font-weight:600}
  nav a:hover, nav button:hover{color:var(--accent)}

  main{max-width:1100px;margin:26px auto;padding:18px}

  /* Games grid */
  #games{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:22px;margin-top:10px}
  .game-card{background:var(--card);border-radius:12px;padding:14px;box-shadow:0 8px 26px rgba(0,0,0,.45);overflow:hidden;max-width:420px;width:100%;margin-inline:auto;transition:transform .18s}
  .game-card:hover{transform:translateY(-6px)}
  .game-thumb{width:100%;height:160px;object-fit:cover;border-radius:8px;background:linear-gradient(180deg,#061021,#04101a)}
  .game-title{color:var(--accent);font-weight:800;margin:10px 0 6px}
  .game-desc{color:var(--muted);font-size:.95rem;min-height:44px}
  .game-stats{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
  .pill{background:rgba(255,255,255,0.02);padding:6px 8px;border-radius:10px;color:var(--muted);font-weight:700;font-size:.9rem}

  .actions{display:flex;gap:8px;align-items:center;margin-top:12px}
  .btn{padding:8px 12px;border-radius:10px;background:var(--accent);color:#031022;font-weight:800;border:none;cursor:pointer}
  .btn.secondary{background:transparent;color:var(--accent);border:1px solid rgba(255,255,255,0.06)}
  .disabled{opacity:.5;pointer-events:none}

  /* Update Log */
  .update-log{margin-top:22px;padding:14px;border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.03));box-shadow:0 8px 20px rgba(0,0,0,0.35)}
  .update-item{display:flex;justify-content:space-between;gap:12px;padding:10px;background:rgba(0,0,0,0.12);border-radius:8px;margin-bottom:8px}
  .update-date{color:var(--accent);font-weight:800}
  .update-text{color:var(--muted)}
  .update-actions{display:flex;gap:8px;align-items:center}

  /* Feedback / modal */
  .feedback-btn{background:rgba(255,255,255,0.03);color:var(--muted);padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,0.02);cursor:pointer}
  .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);z-index:900}
  .modal .card{width:360px;background:var(--card);padding:14px;border-radius:10px}
  .modal textarea{width:100%;height:110px;border-radius:8px;padding:8px;background:transparent;border:1px solid rgba(255,255,255,0.04);color:inherit}

  /* Overlay update */
  .overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:999;background:rgba(0,0,0,0.7)}
  .spinner{width:72px;height:72px;border-radius:50%;border:8px solid rgba(255,255,255,0.12);border-top-color:var(--accent);animation:spin 1s linear infinite}
  @keyframes spin{to{transform:rotate(360deg)}}

  /* Particles */
  .particle-layer{position:fixed;inset:0;pointer-events:none;overflow:hidden;z-index:0}
  .p{position:absolute;top:-8vh;will-change:transform,opacity}
  .p.snow{color:#e6f4ff;font-size:14px}
  .p.fire{filter:drop-shadow(0 0 8px rgba(255,120,20,0.75));font-size:18px}
  .p.heart{font-size:16px}
  @keyframes fallDown{0%{transform:translateY(-10vh) rotate(0deg);opacity:1}100%{transform:translateY(110vh) rotate(360deg);opacity:0.05}}

  footer{margin-top:28px;padding:18px;text-align:center;color:var(--muted);font-size:0.95rem}
  footer a{color:var(--accent);text-decoration:none}

  /* small responsive */
  @media (max-width:820px){ header{padding:12px} main{padding:12px} .brand h1{font-size:1rem} .game-thumb{height:140px} }
</style>
</head>
<body>
  <!-- Loading screen (10s) -->
  <div id="loading" aria-hidden="false">
    <img src="https://static.vecteezy.com/system/resources/thumbnails/018/867/786/small/halloween-pumpkin-face-free-png.png" alt="pumpkin" />
    <h1>üéÉ Happy Halloween from BloxGlobe Studio‚Ñ¢</h1>
  </div>

  <header>
    <div class="brand">
      <img src="f79f5ae8-e979-4db1-a801-1be17a2df071.png" alt="logo" />
      <h1>BloxGlobe Studios‚Ñ¢</h1>
    </div>
    <nav>
      <a href="#games">Games</a>
      <a href="#update-log">Updates</a>
      <a id="robloxProfileLink" href="https://www.roblox.com/users/5525937576/profile" target="_blank">View Roblox</a>
      <a href="https://whatsapp.com/channel/0029Vb7jfKbH5JM6ceBswz3M" target="_blank">Follow Channel</a>
      <button class="feedback-btn" id="feedbackBtn">üí¨ Feedback</button>
      <button id="toggleEditBtn" class="feedback-btn" title="Admin Edit">‚úèÔ∏è Edit Mode</button>
    </nav>
  </header>

  <main>
    <section aria-label="Games">
      <h2 style="color:var(--accent);margin-bottom:6px">Our Games</h2>
      <div id="games">
        <!-- Cards are rendered by JS -->
      </div>
    </section>

    <section id="update-log" class="update-log" aria-live="polite">
      <h2 style="color:var(--accent);margin-top:8px">Update Log</h2>
      <p class="update-text" style="color:var(--muted)">Updates posted to our WhatsApp channel ‚Äî follow for announcements.</p>
      <div id="updatesContainer" style="margin-top:12px"></div>
      <div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end">
        <button id="addUpdateBtn" class="btn secondary" title="Add update (admin only)">+ Add Update</button>
        <button id="exportUpdatesBtn" class="btn secondary">Export JSON</button>
      </div>
    </section>
  </main>

  <footer>
    Founder & Developer: <strong>Abel</strong><br>
    Founder & Developer; Abel. ¬©BloxGlobe Studio‚Ñ¢. All rights reserved 2025.
  </footer>

  <!-- Feedback modal -->
  <div class="modal" id="feedbackModal" aria-hidden="true">
    <div class="card" role="dialog" aria-modal="true">
      <h3 style="margin-top:0;color:var(--accent)">Send Feedback</h3>
      <textarea id="feedbackText" placeholder="Describe the issue..."></textarea>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:8px">
        <button id="sendFeedbackBtn" class="btn">Send Report</button>
        <button id="closeFeedbackBtn" class="btn secondary">Close</button>
      </div>
    </div>
  </div>

  <!-- update overlay -->
  <div class="overlay" id="updateOverlay" aria-hidden="true" style="display:none;">
    <div style="text-align:center;color:#fff">
      <div class="spinner" aria-hidden="true"></div>
      <div style="margin-top:12px">Updating website ‚Äî applying changes‚Ä¶</div>
    </div>
  </div>

  <!-- particle layer -->
  <div class="particle-layer" id="particles" aria-hidden="true"></div>

<script>
/* ----------------- CONFIG & KEYS ----------------- */
const ADMIN_PASSPHRASE = 'SpotifyLover.To';
const STORAGE = {
  THEME: 'bg_theme',
  EDIT: 'bg_edit_mode',
  UPDATES: 'bg_updates',
  VERSION: 'bloxglobeVersion'
};

// games list: placeId + webpage link (from you)
const GAMES = [
  { placeId: 135869717619701, url: 'https://www.roblox.com/games/135869717619701/Beta', fallbackThumb: 'https://tr.rbxcdn.com/180DAY-0711806b978d8c39c4648f0217ab8833/150/150/Image/Webp/noFilter' },
  { placeId: 85250100428738,  url: 'https://www.roblox.com/games/85250100428738/R25', fallbackThumb: 'https://tr.rbxcdn.com/180DAY-2e13d3826546b24d09befc538df4d527/150/150/Image/Webp/noFilter' }
];

/* ----------------- UTIL ----------------- */
const el = id => document.getElementById(id);
function escapeHtml(s){ if(!s) return ''; return String(s).replace(/[&<>"']/g, c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }
function sleep(ms){ return new Promise(r=>setTimeout(r,ms)); }
function isEditMode(){ return localStorage.getItem(STORAGE.EDIT) === '1'; }
function setEditMode(v){ localStorage.setItem(STORAGE.EDIT, v ? '1' : '0'); toggleEditUI(); renderUpdates(); renderGames(); }
function toggleEditUI(){
  const btn = el('toggleEditBtn');
  btn.style.background = isEditMode() ? 'rgba(0,200,255,0.08)' : '';
  btn.style.color = isEditMode() ? 'var(--accent)' : '';
  btn.title = isEditMode() ? 'Edit Mode: ON' : 'Enable Edit Mode';
}

/* ----------------- LOADING SCREEN (10s) ----------------- */
(async function loadingScreen(){
  const loading = el('loading');
  // show 10s, then fade out (animation handled in CSS by removal)
  await sleep(10000);
  loading.style.transition = 'opacity .6s, visibility .6s';
  loading.style.opacity = '0';
  loading.style.pointerEvents = 'none';
  setTimeout(()=> loading.remove(), 800);
})();

/* ----------------- UPDATES (local storage, admin edit protected) ----------------- */
function loadUpdates(){
  try{
    const raw = localStorage.getItem(STORAGE.UPDATES);
    if(!raw){
      const seed = [
        { date: new Date().toLocaleDateString(), text: 'Site launched ‚Äî BloxGlobe Studios official site is live!', source: 'manual' }
      ];
      localStorage.setItem(STORAGE.UPDATES, JSON.stringify(seed));
      return seed;
    }
    return JSON.parse(raw) || [];
  }catch(e){ return []; }
}
function saveUpdates(arr){ localStorage.setItem(STORAGE.UPDATES, JSON.stringify(arr)); renderUpdates(); }
function renderUpdates(){
  const container = el('updatesContainer');
  container.innerHTML = '';
  const list = loadUpdates();
  if(!list.length){ container.innerHTML = '<p class="update-text">No updates yet.</p>'; return; }
  // newest first
  list.slice().reverse().forEach((u, idxRev)=>{
    const idx = list.length - 1 - idxRev;
    const row = document.createElement('div');
    row.className = 'update-item';
    row.innerHTML = `<div><div class="update-date">${escapeHtml(u.date)}</div><div class="update-text">${escapeHtml(u.text)}</div></div>`;
    const actions = document.createElement('div'); actions.className='update-actions';
    const src = document.createElement('div'); src.className='pill'; src.style.fontSize='0.85rem'; src.style.background='transparent'; src.style.color='var(--muted)'; src.innerText = u.source || 'manual';
    actions.appendChild(src);
    if(isEditMode()){
      const editBtn = document.createElement('button'); editBtn.className='btn secondary'; editBtn.style.padding='6px'; editBtn.innerText='Edit';
      editBtn.addEventListener('click', ()=> {
        const newText = prompt('Edit update text:', u.text);
        if(newText !== null){
          u.text = newText;
          const arr = loadUpdates(); arr[idx] = u; saveUpdates(arr);
        }
      });
      const delBtn = document.createElement('button'); delBtn.className='btn secondary'; delBtn.style.padding='6px'; delBtn.innerText='Delete';
      delBtn.addEventListener('click', ()=> {
        if(confirm('Delete this update?')){ const arr = loadUpdates(); arr.splice(idx,1); saveUpdates(arr); }
      });
      actions.appendChild(editBtn); actions.appendChild(delBtn);
    }
    row.appendChild(actions);
    container.appendChild(row);
  });
}

/* Add update (admin-only) */
el('addUpdateBtn').addEventListener('click', ()=>{
  if(!isEditMode()){ alert('Enable Edit Mode (admin) to add updates.'); return; }
  const text = prompt('Write a short update:');
  if(!text) return;
  const date = new Date().toLocaleDateString();
  const arr = loadUpdates(); arr.push({ date, text, source: 'manual' }); saveUpdates(arr);
});

/* Export updates */
el('exportUpdatesBtn').addEventListener('click', ()=>{
  navigator.clipboard.writeText(localStorage.getItem(STORAGE.UPDATES) || '[]').then(()=> alert('Updates JSON copied to clipboard.'));
});

/* ----------------- Admin toggle (button) ----------------- */
el('toggleEditBtn').addEventListener('click', async ()=>{
  if(isEditMode()){ setEditMode(false); alert('Edit Mode disabled'); return; }
  const pass = prompt('Enter admin passphrase:');
  if(pass === null) return;
  if(pass === ADMIN_PASSPHRASE){ setEditMode(true); alert('Edit Mode enabled'); }
  else alert('Incorrect passphrase');
});

/* ----------------- Feedback modal -> GitHub issue ----------------- */
const fbModal = el('feedbackModal');
el('feedbackBtn').addEventListener('click', ()=>{ fbModal.style.display='flex'; fbModal.setAttribute('aria-hidden','false'); el('feedbackText').focus(); });
el('closeFeedbackBtn').addEventListener('click', ()=>{ fbModal.style.display='none'; fbModal.setAttribute('aria-hidden','true'); });
el('sendFeedbackBtn').addEventListener('click', ()=> {
  const text = el('feedbackText').value.trim();
  if(!text) return alert('Please describe the issue first!');
  const gh = `https://github.com/BloxGlobe/BloxGlobe-Studio--Website/issues/new?title=Feedback&body=${encodeURIComponent(text)}`;
  window.open(gh, '_blank');
  el('feedbackText').value = '';
  el('closeFeedbackBtn').click();
});

/* ----------------- ROBLOX API: fetch and render game cards ----------------- */
/* Helper: given placeId -> get universeId */
async function getUniverseId(placeId){
  try{
    const res = await fetch(`https://apis.roblox.com/universes/v1/places/${placeId}/universe`);
    if(!res.ok) return null;
    const j = await res.json();
    return j.universeId || null;
  }catch(e){ return null; }
}

/* Helper: get game info */
async function getGameInfo(universeId){
  try{
    const r = await fetch(`https://games.roblox.com/v1/games?universeIds=${universeId}`);
    if(!r.ok) return null;
    const j = await r.json();
    return j.data?.[0] ?? null;
  }catch(e){ return null; }
}

/* Helper: get icon */
async function getGameIcon(universeId){
  try{
    const r = await fetch(`https://thumbnails.roblox.com/v1/games/icons?universeIds=${universeId}&size=512x512&format=Png`);
    if(!r.ok) return null;
    const j = await r.json();
    return j.data?.[0]?.imageUrl ?? null;
  }catch(e){ return null; }
}

/* Helper: votes */
async function getGameVotes(universeId){
  try{
    const r = await fetch(`https://games.roblox.com/v1/games/votes?universeIds=${universeId}`);
    if(!r.ok) return null;
    const j = await r.json();
    return j.data?.[0] ?? null;
  }catch(e){ return null; }
}

/* Build a card element (with fallback) */
function makeCardSkeleton(placeId, link){
  const card = document.createElement('div'); card.className = 'game-card';
  card.dataset.place = placeId;
  card.innerHTML = `
    <img class="game-thumb" src="" alt="thumb" />
    <div class="game-title">Loading...</div>
    <div class="game-desc">Fetching details‚Ä¶</div>
    <div class="game-stats"></div>
    <div class="actions"><a class="btn play" target="_blank">Play</a><button class="btn secondary open-profile">Profile</button></div>
  `;
  card.querySelector('.play').href = link;
  card.querySelector('.open-profile').addEventListener('click', ()=> {
    const pid = card.dataset.place;
    // open game's page (link already set as play link)
    window.open(link, '_blank');
  });
  return card;
}

/* Render games list */
async function renderGames(){
  const container = document.getElementById('games');
  container.innerHTML = '';
  for(const g of GAMES){
    const card = makeCardSkeleton(g.placeId, g.url);
    container.appendChild(card);
    populateCard(card, g).catch(e=>console.warn('populateCard error',e));
  }
}

/* Populate card with Roblox data (safe fallbacks) */
async function populateCard(card, g){
  const placeId = g.placeId;
  const thumbEl = card.querySelector('.game-thumb');
  const titleEl = card.querySelector('.game-title');
  const descEl = card.querySelector('.game-desc');
  const statsEl = card.querySelector('.game-stats');
  const playBtn = card.querySelector('.play');

  // Set default fallback thumb right away (so something shows)
  thumbEl.src = g.fallbackThumb;

  // Try to fetch universe -> game info -> icon -> votes
  const universeId = await getUniverseId(placeId);
  let game = null, icon = null, votes = null;
  if(universeId){
    // get in parallel
    [game, icon, votes] = await Promise.all([ getGameInfo(universeId), getGameIcon(universeId), getGameVotes(universeId) ]);
  }

  // Write sensible values, preferring live data
  const name = game?.name || (g.name) || (`Place ${placeId}`);
  const description = game?.description || 'No description available.';
  const visits = (typeof game?.visits === 'number') ? game.visits : null;
  const playing = (typeof game?.playing === 'number') ? game.playing : null;
  const up = votes?.upVotes ?? votes?.upvoteCount ?? 0;
  const down = votes?.downVotes ?? votes?.downVoteCount ?? 0;

  // update UI
  titleEl.textContent = name;
  descEl.textContent = description;
  if(icon) thumbEl.src = icon;

  // Stats block
  statsEl.innerHTML = '';
  // visits
  const visitsPill = document.createElement('div'); visitsPill.className='pill';
  visitsPill.textContent = visits !== null ? `üëÄ ${visits.toLocaleString()} visits` : `üëÄ N/A`;
  statsEl.appendChild(visitsPill);
  // playing
  const playingPill = document.createElement('div'); playingPill.className='pill';
  playingPill.textContent = playing !== null ? `üßç ${playing.toLocaleString()} playing` : `üßç N/A`;
  statsEl.appendChild(playingPill);
  // votes
  const votesPill = document.createElement('div'); votesPill.className='pill';
  votesPill.textContent = `üëç ${Number(up).toLocaleString()} | üëé ${Number(down).toLocaleString()}`;
  statsEl.appendChild(votesPill);

  // If API provides rootPlaceId, map play link to that for correct canonical experience
  if(game?.rootPlaceId){
    playBtn.href = `https://www.roblox.com/games/${game.rootPlaceId}`;
  } else {
    playBtn.href = g.url;
  }

  // admin in-card editing for visits/lastUpdated stored locally (if edit mode ON)
  // We'll show small edit buttons when edit mode is on ‚Äî these persist to localStorage per place
  function maybeAddAdminControls(){
    const existing = card.querySelectorAll('.admin-edit');
    existing.forEach(n=>n.remove());
    if(!isEditMode()) return;
    const meta = JSON.parse(localStorage.getItem('bg_games_meta') || '{}');
    // visits edit
    const ev = document.createElement('button'); ev.className='btn secondary admin-edit'; ev.style.padding='6px'; ev.innerText='Edit Visits';
    ev.addEventListener('click', ()=>{
      const nv = prompt('Enter visits (numbers only):', meta[placeId]?.visits ?? (visits ?? ''));
      if(nv !== null){
        meta[placeId] = meta[placeId] || {};
        meta[placeId].visits = nv;
        localStorage.setItem('bg_games_meta', JSON.stringify(meta));
        visitsPill.textContent = `üëÄ ${nv.toLocaleString ? nv : nv}`;
      }
    });
    // last updated edit
    const elast = document.createElement('button'); elast.className='btn secondary admin-edit'; elast.style.padding='6px'; elast.innerText='Edit Last';
    elast.addEventListener('click', ()=>{
      const nv = prompt('Last Updated (e.g. Oct 21, 2025):', meta[placeId]?.lastUpdated || '');
      if(nv !== null){
        meta[placeId] = meta[placeId] || {};
        meta[placeId].lastUpdated = nv;
        localStorage.setItem('bg_games_meta', JSON.stringify(meta));
        // show as a pill
        let lastP = card.querySelector('.pill.lastUpdated');
        if(!lastP){ lastP = document.createElement('div'); lastP.className='pill lastUpdated'; statsEl.appendChild(lastP); }
        lastP.textContent = `Last: ${nv}`;
      }
    });
    card.querySelector('.actions').insertBefore(ev, card.querySelector('.actions').firstChild);
    card.querySelector('.actions').insertBefore(elast, card.querySelector('.actions').firstChild);
  }

  // populate saved meta if exists when API missing values
  const gm = JSON.parse(localStorage.getItem('bg_games_meta') || '{}');
  if(!visits && gm[placeId]?.visits) visitsPill.textContent = `üëÄ ${gm[placeId].visits}`;
  if(gm[placeId]?.lastUpdated){
    const lastPill = document.createElement('div'); lastPill.className='pill lastUpdated'; lastPill.textContent = `Last: ${gm[placeId].lastUpdated}`;
    statsEl.appendChild(lastPill);
  }

  maybeAddAdminControls();
  // re-add admin controls on edit mode toggle
  // simple event: observe localStorage change (other tabs) or provide a global hook - we listen to storage event
}

/* Watch for edit mode toggles to re-render admin controls by re-rendering games */
window.addEventListener('storage', (ev)=>{
  if(ev.key === STORAGE.EDIT || ev.key === 'bg_games_meta') renderGames();
});

/* ----------------- RENDER ALL ----------------- */
async function renderAll(){
  renderUpdates();
  await renderGames();
}
renderAll();

/* ----------------- AUTO-UPDATE DETECTOR ----------------- */
async function checkVersionAndNotify(){
  try{
    const res = await fetch('version.json?' + Date.now(), {cache:'no-store'});
    if(!res.ok) return;
    const j = await res.json();
    const current = localStorage.getItem(STORAGE.VERSION) || null;
    if(current !== j.version){
      // show overlay 20s
      const ov = el('updateOverlay');
      ov.style.display = 'flex';
      ov.setAttribute('aria-hidden','false');
      setTimeout(()=>{ ov.style.display='none'; ov.setAttribute('aria-hidden','true'); }, 20000);
      localStorage.setItem(STORAGE.VERSION, j.version);
      // refresh UI datas (games/updates)
      await renderGames();
      renderUpdates();
    }
  }catch(e){
    // ignore
  }
}
// initial check and periodic every 5 minutes
checkVersionAndNotify();
setInterval(checkVersionAndNotify, 5*60*1000);

/* ----------------- PARTICLES: snow, fire, heartbroken ----------------- */
function spawnParticles(){
  const layer = el('particles');
  layer.innerHTML = '';
  const snowCount = 26; const fireCount = 16; const heartCount = 8;
  function make(type, char, sizeMin, sizeAdd, durMin, durAdd){
    const d = document.createElement('div');
    d.className = 'p ' + type;
    d.textContent = char;
    const size = Math.floor(sizeMin + Math.random()*sizeAdd);
    d.style.fontSize = size + 'px';
    d.style.left = Math.random()*100 + 'vw';
    const dur = (durMin + Math.random()*durAdd).toFixed(2);
    d.style.animation = `fallDown ${dur}s linear ${-Math.random()*dur}s infinite`;
    layer.appendChild(d);
  }
  for(let i=0;i<snowCount;i++) make('snow','‚ùÑÔ∏è',10,18,8,8);
  for(let i=0;i<fireCount;i++) make('fire','üî•',14,16,6,6);
  for(let i=0;i<heartCount;i++) make('heart','üíî',12,12,9,6);
}
spawnParticles();

/* ----------------- INITIALIZATION: ensure UI states ----------------- */
toggleEditUI();

/* ----------------- EXPORT: allow other pages to refresh games (optional) ----------------- */
window.BloxGlobe = { renderGames, renderUpdates };

/* ----------------- PROVIDE fallback: if Roblox API blocked, still show thumbnails you gave (handled in code) ----------------- */

/* ----------------- load saved updates into UI ----------------- */
function ensureSeedUpdates(){ if(!localStorage.getItem(STORAGE.UPDATES)){ const seed=[{date:new Date().toLocaleDateString(), text:'Site launched ‚Äî BloxGlobe Studios official site is live!', source:'manual'}]; localStorage.setItem(STORAGE.UPDATES, JSON.stringify(seed)); } }
ensureSeedUpdates();
renderUpdates();
</script>
</body>
</html>
