<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>BloxGlobe Studios‚Ñ¢</title>
<link rel="icon" href="3318f28d-0ae1-4969-b037-969e8e7b4b12.png" />
<style>
  :root{
    --accent:#00aaff; --dark:#0b0e17; --card:#111526; --light:#e6f4ff; --muted:#c8d7e1;
    --glass: rgba(255,255,255,0.03);
  }
  [data-theme="light"]{
    --accent:#0077cc; --dark:#f5f7fb; --card:#fff; --light:#03203b; --muted:#415463; --glass: rgba(0,0,0,0.04);
  }
  *{box-sizing:border-box;margin:0;padding:0;font-family:Inter,system-ui,Arial,sans-serif}
  html,body{height:100%}
  body{background:radial-gradient(circle at top,#0b0e17,#060810 80%);color:var(--light);-webkit-font-smoothing:antialiased}
  a{color:var(--accent);text-decoration:none}
  header{display:flex;align-items:center;justify-content:space-between;padding:14px 20px;background:var(--glass);backdrop-filter:blur(8px);border-bottom:1px solid rgba(255,255,255,0.04);position:sticky;top:0;z-index:60}
  .logo{display:flex;align-items:center;gap:12px}
  .logo img{width:48px;height:48px;border-radius:12px;object-fit:contain;background:rgba(255,255,255,0.02);padding:6px}
  .brand{font-weight:800;font-size:1.05rem}
  nav{display:flex;gap:14px}
  nav a{color:var(--muted);font-weight:600}
  nav a:hover{color:var(--accent)}
  main{max-width:1100px;margin:26px auto;padding:20px}
  .hero{text-align:center;padding:18px}
  .main-heading{font-size:2.1rem;color:var(--light);margin-bottom:6px}
  .main-sub{color:var(--muted);margin-bottom:14px}

  /* Games */
  .games{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px;margin-top:18px}
  .game-card{background:var(--card);border-radius:14px;padding:16px;box-shadow:0 10px 26px rgba(0,0,0,0.45);position:relative;overflow:hidden}
  .game-thumb{width:100%;height:140px;object-fit:cover;border-radius:10px;background:linear-gradient(180deg,#061021,#04101a)}
  .game-title{color:var(--accent);font-weight:800;margin:10px 0 6px}
  .game-desc{color:var(--muted);font-size:0.95rem;min-height:44px}
  .game-meta{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;align-items:center}
  .meta-pill{background:rgba(255,255,255,0.02);padding:6px 10px;border-radius:10px;color:var(--muted);font-weight:700;font-size:0.9rem}
  .game-actions{display:flex;gap:8px;margin-top:12px}
  .btn{padding:8px 12px;border-radius:10px;background:var(--accent);color:#031022;font-weight:800;text-decoration:none;border:none;cursor:pointer}
  .btn.secondary{background:transparent;color:var(--accent);border:1px solid rgba(255,255,255,0.06)}
  .btn.ghost{background:transparent;color:var(--muted);border:1px dashed rgba(255,255,255,0.04)}

  /* Coming soon special */
  .coming-soon{display:flex;align-items:center;justify-content:center;min-height:200px;font-size:1.15rem;color:var(--accent);}

  /* Update Log */
  .update-log{margin-top:22px;padding:14px;border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.03));box-shadow:0 8px 20px rgba(0,0,0,0.35)}
  .update-item{display:flex;justify-content:space-between;gap:12px;padding:12px;background:var(--card);border-radius:10px;margin-bottom:10px;align-items:flex-start}
  .update-left{max-width:78%}
  .update-date{color:var(--accent);font-weight:800;margin-bottom:6px}
  .update-text{color:var(--muted)}
  .update-actions{display:flex;flex-direction:column;gap:8px;align-items:flex-end}

  /* About */
  .about{margin-top:22px;padding:18px;border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.03));box-shadow:0 8px 20px rgba(0,0,0,0.35);text-align:center}
  .dev-logo{width:110px;height:110px;border-radius:16px;object-fit:cover;margin-bottom:12px;background:rgba(255,255,255,0.03)}
  .dev-name{color:var(--accent);font-weight:800;margin-bottom:6px}
  .dev-bio{color:var(--muted)}

  /* footer */
  footer{margin-top:28px;padding:18px;text-align:center;color:var(--muted);font-size:0.9rem}

  /* settings modal */
  .settingsBtn{position:fixed;right:18px;bottom:18px;background:var(--card);color:var(--accent);padding:10px;border-radius:12px;border:1px solid rgba(255,255,255,0.04);z-index:140;cursor:pointer;box-shadow:0 12px 30px rgba(0,0,0,0.5)}
  .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.55);display:none;align-items:center;justify-content:center;z-index:150}
  .modal{width:94%;max-width:760px;background:var(--card);border-radius:12px;padding:16px;color:var(--light);box-shadow:0 20px 50px rgba(0,0,0,0.6)}
  .modal h3{color:var(--accent);margin-bottom:8px}
  .fields{display:flex;gap:8px;margin-bottom:8px}
  input[type="text"], input[type="url"], textarea, select {flex:1;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--light)}
  .small{font-size:0.9rem;color:var(--muted)}
  .edit-btn{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);padding:6px;border-radius:8px;cursor:pointer}

  /* inline editable */
  .editable{outline:2px dashed rgba(0,170,255,0.12);padding:6px;border-radius:6px}

  /* responsive */
  @media (max-width:820px){ .logo img{width:40px;height:40px} nav{display:none} .games{grid-template-columns:1fr} .modal{max-width:95%} }
</style>
</head>
<body>
  <header>
    <div class="logo">
      <img id="siteLogo" src="3318f28d-0ae1-4969-b037-969e8e7b4b12.png" alt="BloxGlobe logo" />
      <div>
        <div class="brand">BloxGlobe Studios‚Ñ¢</div>
        <div class="small" style="color:var(--muted)">Roblox Developer Studio</div>
      </div>
    </div>
    <nav aria-label="Main nav">
      <a href="#games">Games</a>
      <a href="#update-log">Updates</a>
      <a href="#about">About</a>
    </nav>
  </header>

  <main>
    <section class="hero">
      <h1 class="main-heading">Welcome to BloxGlobe Studios‚Ñ¢</h1>
      <p class="main-sub">Follow our updates, play our games, and join the community.</p>
    </section>

    <!-- Games -->
    <section id="games">
      <h2 style="color:var(--accent)">Our Games</h2>
      <div class="games" id="gameList"></div>
    </section>

    <!-- Update Log -->
    <section id="update-log" class="update-log" aria-live="polite">
      <h2 style="color:var(--accent)">Update Log</h2>
      <p class="small">Updates posted to our WhatsApp channel ‚Äî this feed can be edited locally via Settings (Edit Mode).</p>
      <div id="updates" style="margin-top:12px"></div>
      <div style="text-align:center;margin-top:12px"><a class="btn" href="https://whatsapp.com/channel/0029Vb7jfKbH5JM6ceBswz3M" target="_blank">View Channel on WhatsApp</a></div>
    </section>

    <!-- About -->
    <section id="about" class="about">
      <img id="devAvatar" class="dev-logo" src="3318f28d-0ae1-4969-b037-969e8e7b4b12.png" alt="dev avatar" />
      <div class="dev-name" id="devName">@blox_fruits20307</div>
      <div class="dev-bio" id="devBio">Founder & developer ‚Äî I create and update games and post announcements on our WhatsApp Channel.</div>
      <div style="margin-top:12px;display:flex;gap:8px;justify-content:center">
        <a class="btn secondary" target="_blank" id="robloxProfile">View Roblox</a>
        <a class="btn" href="https://whatsapp.com/channel/0029Vb7jfKbH5JM6ceBswz3M" target="_blank">Join WhatsApp Channel</a>
      </div>
    </section>
  </main>

  <footer>
    ¬© <span id="year"></span> BloxGlobe Studios‚Ñ¢ ¬∑ All rights reserved.
  </footer>

  <!-- Settings -->
  <button class="settingsBtn" id="settingsBtn" title="Settings">‚öôÔ∏è</button>
  <div class="modal-backdrop" id="modalBackdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true">
      <h3>Settings & Edit Mode</h3>

      <div style="margin-bottom:8px">
        <label class="small">Edit Mode (toggle to enable on-page edits)</label>
        <div style="display:flex;gap:8px;margin-top:6px">
          <button id="toggleEdit" class="btn secondary">Toggle Edit Mode</button>
          <div class="small" id="editState">Edit Mode: Off</div>
        </div>
      </div>

      <hr style="margin:10px 0;border:none;border-top:1px solid rgba(255,255,255,0.04)" />

      <div style="margin-bottom:10px">
        <label class="small">Theme</label>
        <div style="display:flex;gap:8px;margin-top:6px">
          <button id="toggleTheme" class="btn secondary">Toggle Dark / Light</button>
          <div class="small" id="themeLabel">Theme: Dark</div>
        </div>
      </div>

      <hr style="margin:10px 0;border:none;border-top:1px solid rgba(255,255,255,0.04)" />

      <h4 style="color:var(--accent);margin-bottom:6px">Music / Media</h4>
      <div class="fields">
        <select id="mediaType">
          <option value="none">Select</option>
          <option value="roblox">Roblox Sound ID</option>
          <option value="youtube">YouTube URL</option>
          <option value="spotify">Spotify URL</option>
        </select>
        <input id="mediaInput" type="text" placeholder="Paste ID or URL here" />
        <button id="saveMedia" class="btn">Save</button>
      </div>
      <div id="playerArea" style="margin-top:10px"></div>

      <hr style="margin:10px 0;border:none;border-top:1px solid rgba(255,255,255,0.04)" />

      <h4 style="color:var(--accent);margin-bottom:6px">Update Log (Admin)</h4>
      <textarea id="newUpdateText" placeholder="Write a short update..." style="width:100%;height:70px;padding:8px;border-radius:8px;background:transparent;color:var(--light)"></textarea>
      <div style="display:flex;gap:8px;margin-top:8px;align-items:center">
        <input id="newUpdateDate" type="text" placeholder="Date (e.g. Oct 21, 2025)" style="padding:8px;border-radius:8px" />
        <button id="addUpdate" class="btn">Add Update</button>
        <button id="exportUpdates" class="btn secondary">Export JSON</button>
      </div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
        <button id="closeSettings" class="btn secondary">Close</button>
      </div>
    </div>
  </div>

<script>
/* ---------- config & keys ---------- */
const STORAGE = {
  THEME: 'bg_theme',
  EDIT: 'bg_edit_mode',
  UPDATES: 'bg_updates',
  MEDIA: 'bg_media',
  GAMES_META: 'bg_games_meta'
};

document.getElementById('year').innerText = new Date().getFullYear();

/* ---------- initial constants: your Roblox IDs ---------- */
const DEV_USER_ID = 5525937576; // blox_fruits20307
const GAME_PLACE_IDS = [
  { placeId: 135869717619701 }, // ReadyNode [Beta]
  { placeId: 85250100428738 }   // R25
];

/* ---------- helpers ---------- */
const el = id => document.getElementById(id);
function escapeHtml(s){ if(!s) return ''; return String(s).replace(/[&<>"']/g, c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

/* ---------- Theme handling ---------- */
function setTheme(t){
  if(t==='light') document.documentElement.setAttribute('data-theme','light');
  else document.documentElement.removeAttribute('data-theme');
  el('themeLabel').innerText = `Theme: ${t==='light'?'Light':'Dark'}`;
  localStorage.setItem(STORAGE.THEME, t);
}
el('toggleTheme').addEventListener('click', ()=>{
  const cur = localStorage.getItem(STORAGE.THEME) || 'dark';
  setTheme(cur==='dark' ? 'light' : 'dark');
});
setTheme(localStorage.getItem(STORAGE.THEME) || 'dark');

/* ---------- Edit Mode (inline editing) ---------- */
function isEditMode(){ return localStorage.getItem(STORAGE.EDIT) === '1'; }
function setEditMode(v){
  localStorage.setItem(STORAGE.EDIT, v ? '1' : '0');
  el('editState').innerText = `Edit Mode: ${v ? 'On' : 'Off'}`;
  renderAll(); // re-render so edit buttons appear
}
el('toggleEdit').addEventListener('click', ()=> setEditMode(!isEditMode()));
setEditMode(localStorage.getItem(STORAGE.EDIT) === '1');

/* ---------- Settings modal --------- */
const modal = document.getElementById('modalBackdrop');
el('settingsBtn').addEventListener('click', ()=> { modal.style.display='flex'; modal.setAttribute('aria-hidden','false'); loadSettings(); });
el('closeSettings').addEventListener('click', ()=> { modal.style.display='none'; modal.setAttribute('aria-hidden','true'); });

function loadSettings(){
  // media
  const cfg = JSON.parse(localStorage.getItem(STORAGE.MEDIA) || 'null');
  if(cfg){ el('mediaType').value = cfg.type; el('mediaInput').value = cfg.value; } else { el('mediaType').value='none'; el('mediaInput').value=''; }
  renderMediaPlayer();
}

/* ---------- Media player (Roblox, YouTube, Spotify) ---------- */
el('saveMedia').addEventListener('click', ()=>{
  const t = el('mediaType').value;
  const v = el('mediaInput').value.trim();
  if(t==='none' || !v){ alert('Choose type and paste ID/URL'); return; }
  localStorage.setItem(STORAGE.MEDIA, JSON.stringify({type:t, value:v}));
  renderMediaPlayer();
  alert('Saved media settings. Use player controls to play.');
});

function renderMediaPlayer(){
  const box = el('playerArea'); box.innerHTML = '';
  const cfg = JSON.parse(localStorage.getItem(STORAGE.MEDIA) || 'null');
  if(!cfg) return;
  if(cfg.type === 'roblox'){
    // audio element; user must press play
    const audio = document.createElement('audio'); audio.controls = true; audio.preload='none';
    audio.src = `https://assetdelivery.roblox.com/v1/asset/?id=${encodeURIComponent(cfg.value)}`;
    box.appendChild(audio);
  } else if(cfg.type === 'youtube'){
    // embed youtube, try to resolve id
    let url = cfg.value;
    try{
      const u = new URL(cfg.value);
      let id = '';
      if(u.hostname.includes('youtube.com')) id = u.searchParams.get('v');
      if(u.hostname.includes('youtu.be')) id = u.pathname.slice(1);
      if(id) url = `https://www.youtube.com/embed/${id}?rel=0`;
    } catch(e){}
    const iframe = document.createElement('iframe'); iframe.width='100%'; iframe.height='140'; iframe.allow='autoplay; encrypted-media'; iframe.src=url;
    box.appendChild(iframe);
  } else if(cfg.type === 'spotify'){
    let url = cfg.value;
    try { const u = new URL(cfg.value); if(u.hostname.includes('spotify.com')) url = `https://open.spotify.com/embed${u.pathname}${u.search}`; } catch(e){}
    const iframe = document.createElement('iframe'); iframe.width='100%'; iframe.height='140'; iframe.allow='autoplay; encrypted-media'; iframe.src = url;
    box.appendChild(iframe);
  }
}

/* ---------- Update Log (local storage) ---------- */
function loadUpdates(){
  const raw = localStorage.getItem(STORAGE.UPDATES);
  if(!raw){
    const seed = [
      {date:'Oct 18, 2025', text:'Site Launch ‚Äî BloxGlobe Studios‚Ñ¢ official site is live!', source:'manual'},
      {date:'Oct 19, 2025', text:'R25 added to tracked games.', source:'manual'}
    ];
    localStorage.setItem(STORAGE.UPDATES, JSON.stringify(seed));
    return seed;
  }
  try { return JSON.parse(raw); } catch(e){ return []; }
}
function saveUpdates(arr){ localStorage.setItem(STORAGE.UPDATES, JSON.stringify(arr)); renderUpdates(); }
function renderUpdates(){
  const container = el('updates'); container.innerHTML = '';
  const list = loadUpdates();
  if(list.length===0){ container.innerHTML = '<p class="small">No updates yet.</p>'; return; }
  list.slice().reverse().forEach((u, idxRev)=>{
    const idx = list.length - 1 - idxRev; // index in original
    const div = document.createElement('div'); div.className='update-item';
    div.innerHTML = `<div class="update-left"><div class="update-date">${escapeHtml(u.date)}</div><div class="update-text">${escapeHtml(u.text)}</div></div>`;
    const right = document.createElement('div'); right.className='update-actions';
    const meta = document.createElement('div'); meta.className='small'; meta.innerText = u.source || 'manual';
    right.appendChild(meta);
    if(isEditMode()){
      const edit = document.createElement('button'); edit.className='edit-btn'; edit.innerText='‚úèÔ∏è Edit';
      edit.addEventListener('click', ()=> {
        const newText = prompt('Edit update text:', u.text);
        if(newText!==null){ u.text = newText; const arr = loadUpdates(); arr[idx] = u; saveUpdates(arr); }
      });
      const del = document.createElement('button'); del.className='edit-btn'; del.innerText='üóë Delete';
      del.addEventListener('click', ()=> { if(confirm('Delete this update?')){ const arr = loadUpdates(); arr.splice(idx,1); saveUpdates(arr);} });
      right.appendChild(edit); right.appendChild(del);
    }
    div.appendChild(right);
    container.appendChild(div);
  });
}
el('addUpdate').addEventListener('click', ()=>{
  if(!isEditMode()){ alert('Enable Edit Mode in Settings to add updates.'); return; }
  const txt = el('newUpdateText').value.trim(); const dt = el('newUpdateDate').value.trim() || new Date().toLocaleDateString();
  if(!txt){ alert('Write something first'); return; }
  const arr = loadUpdates(); arr.push({date:dt, text:txt, source:'manual'}); saveUpdates(arr);
  el('newUpdateText').value=''; el('newUpdateDate').value='';
});
el('exportUpdates').addEventListener('click', ()=> { navigator.clipboard.writeText(localStorage.getItem(STORAGE.UPDATES) || '[]').then(()=>alert('Updates JSON copied to clipboard.')); });

/* ---------- Games rendering (fetch from Roblox, safe fallbacks) ---------- */
async function fetchUniverseForPlace(placeId){
  try {
    const r = await fetch(`https://apis.roblox.com/universes/v1/places/${placeId}/universe`);
    if(!r.ok) return null;
    const j = await r.json();
    return j.universeId || null;
  } catch(e){ return null; }
}
async function fetchGameInfo(universeId){
  try {
    const r = await fetch(`https://games.roblox.com/v1/games?universeIds=${universeId}`);
    if(!r.ok) return null;
    const j = await r.json();
    return j.data?.[0] || null;
  } catch(e){ return null; }
}
async function fetchGameIcon(universeId){
  try {
    const r = await fetch(`https://thumbnails.roblox.com/v1/games/icons?universeIds=${universeId}&size=256x256&format=Png`);
    if(!r.ok) return null;
    const j = await r.json();
    return j.data?.[0]?.imageUrl || null;
  } catch(e){ return null; }
}

function loadGamesMeta(){ try { return JSON.parse(localStorage.getItem(STORAGE.GAMES_META) || '{}'); } catch(e){ return {}; } }
function saveGamesMeta(obj){ localStorage.setItem(STORAGE.GAMES_META, JSON.stringify(obj)); }

async function createGameCard(placeId){
  const container = document.createElement('div'); container.className='game-card';
  // defaults while loading
  const titleEl = document.createElement('div'); titleEl.className='game-title'; titleEl.textContent = 'Loading...';
  const descEl = document.createElement('div'); descEl.className='game-desc'; descEl.textContent = 'Fetching...';
  const thumb = document.createElement('img'); thumb.className='game-thumb'; thumb.alt='game thumb';
  thumb.src = ''; // set later

  container.appendChild(thumb);
  container.appendChild(titleEl);
  container.appendChild(descEl);

  // meta & actions
  const meta = document.createElement('div'); meta.className='game-meta';
  const visitsSpan = document.createElement('div'); visitsSpan.className='meta-pill'; visitsSpan.textContent='Visits: loading...';
  const lastSpan = document.createElement('div'); lastSpan.className='meta-pill'; lastSpan.innerHTML = `Last Updated: <strong id="last-${placeId}">‚Äî</strong>`;
  meta.appendChild(visitsSpan); meta.appendChild(lastSpan);
  container.appendChild(meta);

  const actions = document.createElement('div'); actions.className='game-actions';
  const playBtn = document.createElement('a'); playBtn.className='btn'; playBtn.textContent='Play'; playBtn.target='_blank';
  actions.appendChild(playBtn);

  // fetch info
  const universeId = await fetchUniverseForPlace(placeId);
  let info = universeId ? await fetchGameInfo(universeId) : null;
  const iconUrl = universeId ? await fetchGameIcon(universeId) : null;

  const title = info?.name || `Place ${placeId}`;
  const desc = info?.description || 'No description available.';
  const visits = info?.visits ? info.visits.toLocaleString() : 'N/A';
  const rootPlace = info?.rootPlaceId || placeId;

  titleEl.textContent = title;
  descEl.textContent = desc;
  visitsSpan.textContent = `Visits: ${visits}`;
  playBtn.href = `https://www.roblox.com/games/${rootPlace}`;

  // thumb fallback handling
  if(iconUrl){ thumb.src = iconUrl; }
  else {
    thumb.src = 'data:image/svg+xml;utf8,'+encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="512" height="300"><rect width="100%" height="100%" fill="#081021"/><text x="50%" y="50%" fill="#3aa8ff" font-size="20" text-anchor="middle" dominant-baseline="middle">BloxGlobe</text></svg>`);
  }
  thumb.onerror = () => {
    thumb.src = 'data:image/svg+xml;utf8,'+encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="512" height="300"><rect width="100%" height="100%" fill="#081021"/><text x="50%" y="50%" fill="#3aa8ff" font-size="20" text-anchor="middle" dominant-baseline="middle">BloxGlobe</text></svg>`);
  };

  // last updated meta editable
  const metaObj = loadGamesMeta();
  const lastVal = (metaObj[placeId] && metaObj[placeId].lastUpdated) || '‚Äî';
  const lastElStrong = lastSpan.querySelector('strong') || lastSpan.querySelector(`#last-${placeId}`);
  lastElStrong.innerText = lastVal;

  if(isEditMode()){
    const editBtn = document.createElement('button'); editBtn.className='edit-btn'; editBtn.innerText='‚úèÔ∏è Edit Last Updated';
    editBtn.addEventListener('click', ()=>{
      const nv = prompt('Set Last Updated (e.g. Oct 21, 2025):', lastElStrong.innerText);
      if(nv !== null){
        lastElStrong.innerText = nv;
        const m = loadGamesMeta(); m[placeId] = m[placeId] || {}; m[placeId].lastUpdated = nv; saveGamesMeta(m);
      }
    });
    actions.appendChild(editBtn);
  }

  actions.appendChild(playBtn);
  container.appendChild(actions);

  return container;
}

async function renderGames(){
  const list = document.getElementById('gameList'); list.innerHTML='';
  // create cards for each game
  for(const g of GAME_PLACE_IDS){
    const placeholder = document.createElement('div'); placeholder.className='game-card'; placeholder.innerHTML = '<div class="game-title">Loading...</div>';
    list.appendChild(placeholder);
    try {
      const card = await createGameCard(g.placeId);
      list.replaceChild(card, placeholder);
    } catch(e){
      console.error('game render error', e);
    }
  }
  // add Coming Soon card
  const cs = document.createElement('div'); cs.className='game-card coming-soon';
  cs.innerHTML = `<div><strong>Coming Soon...</strong><div style="color:var(--muted);margin-top:8px">Stay tuned for upcoming BloxGlobe projects.</div></div>`;
  list.appendChild(cs);
}

/* ---------- Developer info (Roblox) ---------- */
async function loadDevInfo(){
  try {
    const r = await fetch(`https://users.roblox.com/v1/users/${DEV_USER_ID}`);
    const j = await r.json();
    const display = j.displayName || j.name || '@blox_fruits20307';
    el('devName').innerText = display;
    el('robloxProfile').href = `https://www.roblox.com/users/${DEV_USER_ID}/profile`;
    // avatar
    const a = await fetch(`https://thumbnails.roblox.com/v1/users/avatar-headshot?userIds=${DEV_USER_ID}&size=150x150&format=Png&isCircular=false`);
    const ai = await a.json();
    if(ai?.data?.[0]?.imageUrl) el('devAvatar').src = ai.data[0].imageUrl;
  } catch(e){
    console.error('dev info error', e);
  }
}

/* ---------- render everything ---------- */
function renderAll(){
  renderUpdates();
  renderGames();
  loadDevInfo();
  loadSettings();
}
renderAll();

/* ---------- modal close on backdrop ---------- */
document.getElementById('modalBackdrop').addEventListener('click', (ev)=>{ if(ev.target === ev.currentTarget) { ev.currentTarget.style.display='none'; ev.currentTarget.setAttribute('aria-hidden','true'); } });

/* ---------- initialize snow positions (small) ---------- */
(function initSnow(){
  document.querySelectorAll('.snowflake').forEach(f=>{ try{ f.style.left = Math.random()*100 + 'vw'; f.style.animationDuration = (Math.random()*6+6) + 's'; }catch(e){} });
})();

</script>
</body>
</html>
